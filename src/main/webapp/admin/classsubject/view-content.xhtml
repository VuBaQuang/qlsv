<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:fn="http://java.sun.com/jsp/jstl/functions"
                xmlns:ui="http://java.sun.com/jsf/facelets">


    <div align="center">
        <p:growl id="msgs" showDetail="true"/>
        <br/>
        <h:outputText value="Chi tiết lớp học - môn học"/>
        <f:event listener="#{claSubMB.listSub()}" type="preRenderView"/>
        <br/><br/>
        <h:form id="form">
            Môn học:
            <h:selectOneMenu id="classes" value="#{claSubMB.sub}" style="width:160px">
                <f:selectItem itemLabel="Chọn" itemValue="" noSelectionOption="true"/>
                <f:selectItems value="#{claSubMB.listSubject}"/>
                <f:ajax listener="#{claSubMB.updateClassSubject()}" />
            </h:selectOneMenu>

            Môn học:
            <h:selectOneMenu id="subjects" value="#{claSubMB.classe}" style="width:160px">
                <f:ajax listener="#{claSubMB.updateClassSubject()}" />
                <f:selectItem itemLabel="Chọn" itemValue="" noSelectionOption="true"/>
                <f:selectItems value="#{claSubMB.listClass}"/>
            </h:selectOneMenu>

            <br/>
            <br/>
            <p:commandButton value="Hiển thị" actionListener="#{claSubMB.updateListStudent()}" update="students"/>
            <br/>
            <br/>
            <br/>
            <h:panelGrid id="students" columns="2">
                <p:dataTable id="cars2" var="student" value="#{claSubMB.listStudent}" editable="true" editMode="cell" widgetVar="cellCars" >
                    <p:ajax event="cellEdit" listener="#{claSubMB.updateScore}" update="msgs"/>
                    <p:column headerText="Mã sinh viên" style="width:100px; align-content: center">
                        <p:cellEditor disabled="true">
                            <f:facet name="output"><h:outputText value="#{student.code}" /></f:facet>
                            <f:facet name="input"><p:inputText id="code" value="#{student.code}"/></f:facet>
                        </p:cellEditor>
                    </p:column>
                    <p:column headerText="Họ tên">
                        <p:cellEditor disabled="true">
                            <f:facet name="output"><h:outputText value="#{student.name}" /></f:facet>
                            <f:facet name="input"><p:inputText id="name" value="#{student.name}"/></f:facet>
                        </p:cellEditor>
                    </p:column>
                    <p:column headerText="Lớp" style="width:80px">
                        <p:cellEditor disabled="true">
                            <f:facet name="output"><h:outputText value="#{student.classPayroll.name}" /></f:facet>
                            <f:facet name="input"><p:inputText id="classe" value="#{student.classPayroll.name}" /></f:facet>
                        </p:cellEditor>
                    </p:column>
                    <p:column headerText="Tuổi" style="width:60px">
                        <p:cellEditor disabled="true">
                            <f:facet name="output"><h:outputText value="#{student.age}" /></f:facet>
                            <f:facet name="input"><p:inputText id="age" value="#{student.age}" style="width: 50px"/></f:facet>
                        </p:cellEditor>
                    </p:column>
                    <p:column headerText="Địa chỉ">
                        <p:cellEditor disabled="true">
                            <f:facet name="output"><h:outputText value="#{student.address}" /></f:facet>
                            <f:facet name="input"><p:inputText id="address" value="#{student.address}"/></f:facet>
                        </p:cellEditor>
                    </p:column>
                    <p:column headerText="Email">
                        <p:cellEditor disabled="true">
                            <f:facet name="output"><h:outputText value="#{student.email}" /></f:facet>
                            <f:facet name="input"><p:inputText id="email" value="#{student.email}"/></f:facet>
                        </p:cellEditor>
                    </p:column>
                    <p:column headerText="Điểm" style="width:60px">
                        <p:cellEditor>
                            <f:facet name="output"><h:outputText value="#{claSubMB.getScore(student)}" /></f:facet>
                            <f:facet name="input"><p:inputText id="score" value="#{claSubMB.score}"/></f:facet>
                        </p:cellEditor>
                    </p:column>

                    <p:column headerText="Ghi chú">
                        <p:cellEditor disabled="true">
                            <f:facet name="output"><h:outputText value="#{student.note}" /></f:facet>
                            <f:facet name="input"><p:inputText id="note" value="#{student.note}"/></f:facet>
                        </p:cellEditor>
                    </p:column>
                    <p:column style="width:60px" headerText="Thao tác">
                        <h:commandButton value="Xóa" action="#{claSubMB.deleteStuClaSub(student)}" update="cars2"/>
                    </p:column>
                </p:dataTable>
                <br/>
            </h:panelGrid>
            <br/>
            <h:commandButton style="margin: 10px" value="Create" action="add?faces-redirect=true"/>
            <h:commandButton value="Cancel" action="#{userMB.home}"/>
        </h:form>
    </div>
</ui:composition>